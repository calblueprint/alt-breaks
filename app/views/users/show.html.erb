<% content_for :head do %>
  <script type="text/javascript" src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-transition.js"></script>
  <script type="text/javascript" src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-collapse.js"></script>
  <script type="text/javascript" src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-modal.js"></script>
  <script type="text/javascript" src="https://raw.github.com/twitter/bootstrap/master/js/bootstrap-typeahead.js"></script>
  <%= javascript_include_tag 'chosen' %>
<% end %>

<div class="row-fluid">
	<div class="span2 offset1">
		<div class="well">
            <% if @user.avatar.exists? %>
                <%= image_tag @user.avatar.url(:medium) %>
            <% else %>
      			<%= image_tag("/assets/cat.png") %>
            <% end %>
		</div>
	</div>
	<div class="span8">
		<div class="well">
			<h3><%= @user.name %></h3>
			<% @user_trip.each do |trip| %>
			<h4><%= trip.trip_instance.name %> <%= trip.trip_instance.year %></h4>
			<% end %>
			<!-- Button to trigger modal -->
			<% if user_signed_in? && current_user.id == @user.id %>
				<a href="#myModal" role="button" class="btn" data-toggle="modal" style="text-align:right">Edit My Profile</a>
 			<% end %>
		</div>
	</div>
</div>

<div class="row-fluid">
	<div class="span10 offset1">
		<h3>About me</h3>
		<div class="well">
			<%= @user.about_me %>
		</div>
	</div>
</div>

<div class="row-fluid">
	<div class="span10 offset1">
		<h3>Recent Posts and Responses</h3>
		<% @user_posts.each do |post| %>
			<div class="well">
				<h4><%= link_to post.title, trip_instance_post_path(:trip_instance_id => post.trip_instance.id, :id =>post.id) %></h4>
				Posted in: <%= post.trip_instance.name %> <%= post.trip_instance.year%> 
			</div>
		<% end %>
	</div>
</div>


</div>
</div>


<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
    <h3 id="myModalLabel">Edit User</h3>
  </div>
  <div class="modal-body">
    <%= render "form", :locals=>{:user => @user} %>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
    <button class="btn btn-primary">Save changes</button>
  </div>
</div>
